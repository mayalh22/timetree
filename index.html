<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Pixelated Timer</title>
<style>
  body {
      background: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      font-family: monospace;
  }

  input, button {
      font-size: 1.5rem;
      margin: 0.5rem;
      padding: 0.3rem 0.6rem;
      font-family: monospace;
  }
    canvas {
      image-rendering: pixelated; /* makes canvas sharp for pixel art */
      background: white;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <input id="inputSeconds" type="number" min="1" placeholder="Seconds" />
  <button id="startBtn">Start</button>
  <canvas id="timerCanvas" width="400" height="100"></canvas>
<script>
  const canvas = document.getElementById('timerCanvas');
  const ctx = canvas.getContext('2d');
  const startBtn = document.getElementById('startBtn');
  const input = document.getElementById('inputSeconds');

  // Size of each pixel block
  const PIXEL_SIZE = 10;

  // Digit patterns (5x7 grid of pixels for each digit 0-9)
  // 1 = filled pixel, 0 = empty
  // Weâ€™ll use 5 columns and 7 rows per digit
  const digits = {
    '0': [
      [1,1,1,1,1],
      [1,0,0,0,1],
      [1,0,0,1,1],
      [1,0,1,0,1],
      [1,1,0,0,1],
      [1,0,0,0,1],
      [1,1,1,1,1],
    ],
    '1': [
      [0,0,1,0,0],
      [0,1,1,0,0],
      [1,0,1,0,0],
      [0,0,1,0,0],
      [0,0,1,0,0],
      [0,0,1,0,0],
      [1,1,1,1,1],
    ],
    '2': [
      [1,1,1,1,1],
      [0,0,0,0,1],
      [0,0,0,1,1],
      [0,0,1,1,0],
      [0,1,1,0,0],
      [1,1,0,0,0],
      [1,1,1,1,1],
    ],
    '3': [
      [1,1,1,1,1],
      [0,0,0,0,1],
      [0,0,1,1,1],
      [0,0,0,0,1],
      [0,0,0,0,1],
      [0,0,0,0,1],
      [1,1,1,1,1],
    ],
    '4': [
      [1,0,0,1,0],
      [1,0,0,1,0],
      [1,0,0,1,0],
      [1,1,1,1,1],
      [0,0,0,1,0],
      [0,0,0,1,0],
      [0,0,0,1,0],
    ],
    '5': [
      [1,1,1,1,1],
      [1,0,0,0,0],
      [1,1,1,1,0],
      [0,0,0,0,1],
      [0,0,0,0,1],
      [1,0,0,0,1],
      [0,1,1,1,0],
    ],
    '6': [
      [0,1,1,1,0],
      [1,0,0,0,0],
      [1,0,0,0,0],
      [1,1,1,1,0],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [0,1,1,1,0],
    ],
    '7': [
      [1,1,1,1,1],
      [0,0,0,0,1],
      [0,0,0,1,0],
      [0,0,1,0,0],
      [0,1,0,0,0],
      [0,1,0,0,0],
      [0,1,0,0,0],
    ],
    '8': [
      [0,1,1,1,0],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [0,1,1,1,0],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [0,1,1,1,0],
    ],
    '9': [
      [0,1,1,1,0],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [0,1,1,1,1],
      [0,0,0,0,1],
      [0,0,0,0,1],
      [0,1,1,1,0],
    ],
    ':': [
      [0],
      [1],
      [0],
      [0],
      [1],
      [0],
      [0],
    ],
  };

  // Draw a single digit at (x,y)
  function drawDigit(digit, x, y) {
    const pattern = digits[digit];
    if (!pattern) return;
    for (let row = 0; row < pattern.length; row++) {
      for (let col = 0; col < pattern[row].length; col++) {
        if (pattern[row][col] === 1) {
          ctx.fillRect(x + col * PIXEL_SIZE, y + row * PIXEL_SIZE, PIXEL_SIZE, PIXEL_SIZE);
        }
      }
    }
  }

  // Format seconds as MM:SS string
  function formatTime(seconds) {
    const m = Math.floor(seconds / 60);
    const s = seconds % 60;
    return (m < 10 ? '0' : '') + m + ':' + (s < 10 ? '0' : '') + s;
  }

  // Draw entire time string centered horizontally
  function drawTime(str) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = 'black';
    const totalDigits = str.length;
    const digitWidth = 5 * PIXEL_SIZE; // 5 pixels wide per digit
    const colonWidth = PIXEL_SIZE; // colon is 1 pixel wide pattern
    // calculate total width
    let width = 0;
    for (let ch of str) {
      width += (ch === ':' ? colonWidth : digitWidth) + PIXEL_SIZE; // add PIXEL_SIZE spacing between digits
    }
    width -= PIXEL_SIZE; // no spacing after last digit

    let startX = (canvas.width - width) / 2;
    const startY = (canvas.height - 7 * PIXEL_SIZE) / 2;

    for (let ch of str) {
      drawDigit(ch, startX, startY);
      startX += (ch === ':' ? colonWidth : digitWidth) + PIXEL_SIZE;
    }
  }

  let countdown;

  startBtn.addEventListener('click', () => {
    let timeLeft = parseInt(input.value, 10);
    if (isNaN(timeLeft) || timeLeft < 1) return;

    clearInterval(countdown);
    drawTime(formatTime(timeLeft));

    startBtn.disabled = true;
    input.disabled = true;

    countdown = setInterval(() => {
      timeLeft--;
      drawTime(formatTime(timeLeft));
      if (timeLeft <= 0) {
        clearInterval(countdown);
        startBtn.disabled = false;
        input.disabled = false;
      }
    }, 1000);
  });

  // Draw default timer at 00:00 on load
  drawTime('00:00');
</script>
</body>
</html>
