<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Pixelated Timer</title>
<style>
  body {
      background: #004d00; /* dark green background */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      font-family: monospace;
      color: #004d00; /* just to avoid default black text on dark bg */
  }

  input, button {
    font-size: 1.5rem;
    margin: 0.5rem;
    padding: 0.3rem 0.6rem;
    font-family: monospace;
    background-color: #004d00; /* dark green */
    color: #a0d080; /* light green text */
    border: 2px solid #002800;
    border-radius: 4px;
    outline: none;
    width: 140px;
    text-align: center;
    cursor: pointer;
  }

  input::placeholder {
      color: #a0d080;
  }

  input:focus, button:focus {
      border-color: #80b080;
      box-shadow: 0 0 5px #80b080;
  }

  canvas {
    image-rendering: pixelated;
    background: #a0d080; /* lighter green background for canvas */
    margin-top: 1rem;
    border: 2px solid #002800;
  }
</style>
</head>
<body>

  <input id="inputSeconds" type="number" min="1" placeholder="Seconds" />
  <button id="startBtn">Start</button>

  <button id="musicBtn">Play Music</button>
  <audio id="bgMusic" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/03/audio_2d59e2f48f.mp3?filename=relaxing-music-ambient-3781.mp3" type="audio/mpeg" />
  </audio>

  <canvas id="timerCanvas" width="400" height="100"></canvas>

<script>
  const canvas = document.getElementById('timerCanvas');
  const ctx = canvas.getContext('2d');
  const startBtn = document.getElementById('startBtn');
  const input = document.getElementById('inputSeconds');

  const PIXEL_SIZE = 10;
  const digits = {
    '0': [
      [1,1,1,1,1],
      [1,0,0,0,1],
      [1,0,0,1,1],
      [1,0,1,0,1],
      [1,1,0,0,1],
      [1,0,0,0,1],
      [1,1,1,1,1],
    ],
    '1': [
      [0,0,1,0,0],
      [0,1,1,0,0],
      [1,0,1,0,0],
      [0,0,1,0,0],
      [0,0,1,0,0],
      [0,0,1,0,0],
      [1,1,1,1,1],
    ],
    '2': [
      [1,1,1,1,1],
      [0,0,0,0,1],
      [0,0,0,1,1],
      [0,0,1,1,0],
      [0,1,1,0,0],
      [1,1,0,0,0],
      [1,1,1,1,1],
    ],
    '3': [
      [1,1,1,1,1],
      [0,0,0,0,1],
      [0,0,1,1,1],
      [0,0,0,0,1],
      [0,0,0,0,1],
      [0,0,0,0,1],
      [1,1,1,1,1],
    ],
    '4': [
      [1,0,0,1,0],
      [1,0,0,1,0],
      [1,0,0,1,0],
      [1,1,1,1,1],
      [0,0,0,1,0],
      [0,0,0,1,0],
      [0,0,0,1,0],
    ],
    '5': [
      [1,1,1,1,1],
      [1,0,0,0,0],
      [1,1,1,1,0],
      [0,0,0,0,1],
      [0,0,0,0,1],
      [1,0,0,0,1],
      [0,1,1,1,0],
    ],
    '6': [
      [0,1,1,1,0],
      [1,0,0,0,0],
      [1,0,0,0,0],
      [1,1,1,1,0],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [0,1,1,1,0],
    ],
    '7': [
      [1,1,1,1,1],
      [0,0,0,0,1],
      [0,0,0,1,0],
      [0,0,1,0,0],
      [0,1,0,0,0],
      [0,1,0,0,0],
      [0,1,0,0,0],
    ],
    '8': [
      [0,1,1,1,0],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [0,1,1,1,0],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [0,1,1,1,0],
    ],
    '9': [
      [0,1,1,1,0],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [0,1,1,1,1],
      [0,0,0,0,1],
      [0,0,0,0,1],
      [0,1,1,1,0],
    ],
    ':': [
      [0],
      [1],
      [0],
      [0],
      [1],
      [0],
      [0],
    ],
  };

  function drawDigit(digit, x, y) {
    const pattern = digits[digit];
    if (!pattern) return;
    for (let row = 0; row < pattern.length; row++) {
      for (let col = 0; col < pattern[row].length; col++) {
        if (pattern[row][col] === 1) {
          ctx.fillRect(x + col * PIXEL_SIZE, y + row * PIXEL_SIZE, PIXEL_SIZE, PIXEL_SIZE);
        }
      }
    }
  }

  function formatTime(seconds) {
    const m = Math.floor(seconds / 60);
    const s = seconds % 60;
    return (m < 10 ? '0' : '') + m + ':' + (s < 10 ? '0' : '') + s;
  }

  function drawTime(str) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = '#004d00'; // dark green text color
    const digitWidth = 5 * PIXEL_SIZE;
    const colonWidth = PIXEL_SIZE;
    let width = 0;
    for (let ch of str) {
      width += (ch === ':' ? colonWidth : digitWidth) + PIXEL_SIZE;
    }
    width -= PIXEL_SIZE;

    let startX = (canvas.width - width) / 2;
    const startY = (canvas.height - 7 * PIXEL_SIZE) / 2;

    for (let ch of str) {
      drawDigit(ch, startX, startY);
      startX += (ch === ':' ? colonWidth : digitWidth) + PIXEL_SIZE;
    }
  }

  let countdown;

  startBtn.addEventListener('click', () => {
    let timeLeft = parseInt(input.value, 10);
    if (isNaN(timeLeft) || timeLeft < 1) return;

    clearInterval(countdown);
    drawTime(formatTime(timeLeft));

    startBtn.disabled = true;
    input.disabled = true;

    countdown = setInterval(() => {
      timeLeft--;
      drawTime(formatTime(timeLeft));
      if (timeLeft <= 0) {
        clearInterval(countdown);
        startBtn.disabled = false;
        input.disabled = false;
      }
    }, 1000);
  });

  // Music controls
  const musicBtn = document.getElementById('musicBtn');
  const bgMusic = document.getElementById('bgMusic');
  let isPlaying = false;

  musicBtn.addEventListener('click', () => {
    if (isPlaying) {
      bgMusic.pause();
      musicBtn.textContent = 'Play Music';
    } else {
      bgMusic.play();
      musicBtn.textContent = 'Pause Music';
    }
    isPlaying = !isPlaying;
  });

  // Draw default timer at 00:00 on load
  drawTime('00:00');
</script>
</body>
</html>
